## 常用文件校验算法

- CRC(32/64)长度
- MD5
- SHA1

## 秒传原理

### 场景

- 用户上传
- 离线下载
- 好友分享

### 关键点

- 记录文件 Hash 值(MD5/SHA1)
- 用户文件关联

## 分块上传和断点续传

- 小文件不用分块
- 可以并行上传分块，并且可以无序传输

通用接口：

- 初始化分块信息
- 上传分块
- 通知分块上传完成
- 取消上传分块
- 查看分块上传的整体状态

## 存在问题

多个用户同时上传同一个文件的时候如何处理？

- 允许不同用户同时上传同一个文件
- 先完成上传的先入库
- 后上传的只更新用户文件表，并删除已上传的文件
